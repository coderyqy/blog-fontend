{"version":3,"sources":["webpack:///./src/network/label.js","webpack:///./src/views/home/article/AddArticle.vue?cf93","webpack:///src/views/home/article/AddArticle.vue","webpack:///./src/views/home/article/AddArticle.vue?1116","webpack:///./src/views/home/article/AddArticle.vue","webpack:///./src/network/article.js","webpack:///./src/network/file.js","webpack:///./src/views/home/article/AddArticle.vue?5f0c"],"names":["getAllLabel","request","url","method","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","model","value","callback","$$v","articleTitle","expression","on","saveArticle","staticStyle","condec","ref","style","height","mdHeight","toolbars","handleEditorImgAdd","checkList","_l","label","index","key","name","uploadMainImg","handleRemove","fileList","staticRenderFns","data","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","link","imagelink","code","table","fullscreen","readmodel","htmlcode","help","undo","redo","trash","save","navigation","alignleft","aligncenter","alignright","subfield","preview","dialogImageUrl","dialogVisible","disabled","mimetype","imgUrl","labelList","methods","changeMDHeight","clientHeight","document","documentElement","uploadP","change","handlePictureCardPreview","file","handleDownload","console","log","created","getAllLabels","mounted","component","getAllArticle","getArticle","id","title","content","filename","update","deleteArticle","uploadAddPicture","formData","uploadPicture","articleId","uploadMainPicture"],"mappings":"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","file":"js/chunk-18a385ec.be69e6ca.js","sourcesContent":["import { request } from './request'\r\n// 获取所有文章\r\nexport function getAllLabel () {\r\n  return request({\r\n    url: \"/label/\",\r\n    method: \"get\",\r\n  })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-article\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/article' }}},[_vm._v(\"文章管理\")]),_c('el-breadcrumb-item',[_vm._v(\"添加文章\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"top-card\"},[_c('div',{staticClass:\"article-title\"},[_c('span',[_vm._v(\"文章标题\")]),_c('el-input',{staticClass:\"article-title-inp\",attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.articleTitle),callback:function ($$v) {_vm.articleTitle=$$v},expression:\"articleTitle\"}})],1),_c('el-button',{staticClass:\"save-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveArticle}},[_vm._v(\"保存\")])],1)]),_c('el-card',{staticClass:\"box-card upload-card\"},[_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('span',{staticStyle:{\"padding-right\":\"10px\"}},[_vm._v(\"内容摘要\")]),_c('el-input',{staticStyle:{\"width\":\"88%\"},attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"请输入内容\"},model:{value:(_vm.condec),callback:function ($$v) {_vm.condec=$$v},expression:\"condec\"}})],1)]),_c('div',{staticClass:\"editor\"},[_c('mavon-editor',{ref:\"md\",style:({height: _vm.mdHeight}),attrs:{\"toolbars\":_vm.toolbars},on:{\"imgAdd\":_vm.handleEditorImgAdd},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('el-card',{staticClass:\"box-card upload-card\"},[_vm._v(\" 选择标签 \"),_c('el-checkbox-group',{model:{value:(_vm.checkList),callback:function ($$v) {_vm.checkList=$$v},expression:\"checkList\"}},_vm._l((_vm.labelList),function(label,index){return _c('el-checkbox',{key:index,attrs:{\"label\":label.name}})}),1)],1),_c('el-card',{staticClass:\"box-card upload-card\"},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":\"\",\"http-request\":_vm.uploadMainImg,\"on-remove\":_vm.handleRemove,\"file-list\":_vm.fileList,\"list-type\":\"picture\",\"limit\":1}},[_vm._v(\" 上传主图 \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"add-article\">\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/article' }\">文章管理</el-breadcrumb-item>\n      <el-breadcrumb-item>添加文章</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card class=\"box-card\">\n      <div class=\"top-card\">\n        <div class=\"article-title\">\n          <span>文章标题</span>\n          <el-input v-model=\"articleTitle\" class=\"article-title-inp\" placeholder=\"请输入内容\"></el-input>\n        </div>\n        <el-button type=\"primary\" class=\"save-btn\" @click=\"saveArticle\">保存</el-button>\n      </div>\n    </el-card>\n\n    <el-card class=\"box-card upload-card\">\n      <div style=\"display:flex\">\n        <span style=\"padding-right: 10px\">内容摘要</span>\n        <el-input type=\"textarea\" style=\"width:88%\" :rows=\"2\" placeholder=\"请输入内容\" v-model=\"condec\"></el-input>\n      </div>\n    </el-card>\n\n    <div class=\"editor\">\n      <mavon-editor\n        :toolbars=\"toolbars\"\n        v-model=\"value\"\n        @imgAdd=\"handleEditorImgAdd\"\n        :style=\"{height: mdHeight}\"\n        ref=\"md\"\n      />\n    </div>\n\n    <el-card class=\"box-card upload-card\">\n      选择标签\n      <el-checkbox-group v-model=\"checkList\">\n        <el-checkbox v-for=\"(label,index) in labelList\" :label=\"label.name\" :key=\"index\"></el-checkbox>\n      </el-checkbox-group>\n    </el-card>\n\n    <el-card class=\"box-card upload-card\">\n      <el-upload\n        class=\"upload-demo\"\n        action\n        :http-request=\"uploadMainImg\"\n        :on-remove=\"handleRemove\"\n        :file-list=\"fileList\"\n        list-type=\"picture\"\n        :limit=\"1\"\n      >\n        上传主图\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n      </el-upload>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { save } from 'network/article'\nimport { uploadPicture, uploadMainPicture, uploadAddPicture } from 'network/file'\nimport { getAllLabel } from 'network/label'\n\nexport default {\n  name: \"AddArticle\",\n  data () {\n    return {\n      toolbars: {\n        bold: true, // 粗体\n        italic: true, // 斜体\n        header: true, // 标题\n        underline: true, // 下划线\n        strikethrough: true, // 中划线\n        mark: true, // 标记\n        superscript: true, // 上角标\n        subscript: true, // 下角标\n        quote: true, // 引用\n        ol: true, // 有序列表\n        ul: true, // 无序列表\n        link: true, // 链接\n        imagelink: true, // 图片链接\n        code: true, // code\n        table: true, // 表格\n        fullscreen: true, // 全屏编辑\n        readmodel: true, // 沉浸式阅读\n        htmlcode: true, // 展示html源码\n        help: true, // 帮助\n        /* 1.3.5 */\n        undo: true, // 上一步\n        redo: true, // 下一步\n        trash: true, // 清空\n        save: true, // 保存（触发events中的save事件）\n        /* 1.4.2 */\n        navigation: true, // 导航目录\n        /* 2.1.8 */\n        alignleft: true, // 左对齐\n        aligncenter: true, // 居中\n        alignright: true, // 右对齐\n        /* 2.2.1 */\n        subfield: true, // 单双栏模式\n        preview: true, // 预览\n      },\n      value: '', // 富文本内容\n      articleTitle: '', // 文章标题\n      dialogImageUrl: '',\n      dialogVisible: false,\n      disabled: false,\n      mdHeight: '0px',\n      fileList: [], // 主图\n      mimetype: '', // 图片类型\n      imgUrl: '', // 后台传过来的主图地址\n      condec: '', // 内容摘要\n      labelList: [], // 标签列表\n      checkList: [] // 所选标签的列表\n    }\n  },\n  methods: {\n    changeMDHeight () {                        //动态修改样式\n      this.clientHeight = document.documentElement.clientHeight\n      // this.mdHeight = `${this.clientHeight - 210}px`\n      this.mdHeight = `${this.clientHeight - 410}px`\n    },\n    uploadP () {\n\n    },\n    //监听markdown变化\n    change (value, render) {\n\n    },\n    // 上传图片\n    async handleEditorImgAdd (pos, file) {\n      var formData = new FormData()\n      formData.append('picture', file)\n      // 保存图片\n      const result = await uploadAddPicture(formData)\n      // 替换文章图片的url\n      console.log(result)\n      this.$refs.md.$img2Url(pos, result.imgUrl)\n    },\n    // 获取所有标签\n    async getAllLabels () {\n      const result = await getAllLabel()\n      console.log(\"标签\")\n      this.labelList = result\n    },\n    // 保存文章\n    async saveArticle () {\n      console.log(this.checkList)\n      const result = await save(this.articleTitle, this.condec, this.value, this.imgUrl, this.mimetype, this.checkList)\n      console.log(result)\n      if (result.status == 200) {\n        this.$message({\n          message: result.message,\n          type: 'success'\n        })\n        this.$router.push(\"/article\")\n      } else {\n        this.$message.error(result.message)\n      }\n    },\n    handlePictureCardPreview (file) {\n      this.dialogImageUrl = file.url\n      this.dialogVisible = true\n    },\n    handleDownload (file) {\n      console.log(file)\n    },\n    handleRemove (file, fileList) {\n      console.log(file, fileList)\n    },\n    async uploadMainImg (fileData) {\n      const { file } = fileData\n      var formData = new FormData()\n      formData.append('picture', file)\n      // 保存图片\n      const result = await uploadMainPicture(formData)\n      this.imgUrl = result.imgUrl\n      this.mimetype = result.mimetype\n      console.log(result)\n    }\n  },\n  created () {\n    this.getAllLabels()\n  },\n  mounted () {\n    this.changeMDHeight()\n  }\n}\n</script>\n\n<style scoped>\n.add-article {\n  margin: 14px;\n  /* background-color: #fff; */\n}\n\n.editor {\n  margin-top: 6px;\n}\n\n.top-card {\n  display: flex;\n}\n\n.save-btn {\n  margin-left: auto;\n}\n\n.article-title {\n  display: flex;\n  width: 550px;\n  line-height: 32px;\n}\n.article-title > span {\n  padding-right: 6px;\n  font-size: 16px;\n}\n.article-title-inp {\n  width: 450px;\n}\n\n.upload-card {\n  margin-top: 6px;\n}\n\n.el-checkbox-group {\n  padding-top: 10px;\n  margin-bottom: 10px;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddArticle.vue?vue&type=template&id=fed4e83c&scoped=true&\"\nimport script from \"./AddArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./AddArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddArticle.vue?vue&type=style&index=0&id=fed4e83c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fed4e83c\",\n  null\n  \n)\n\nexport default component.exports","import { request } from './request'\n// 获取所有文章\nexport function getAllArticle () {\n  return request({\n    url: \"/article/\",\n    method: \"get\",\n  })\n}\n// 获取单篇文章\nexport function getArticle (id) {\n  return request({\n    url: `/article/${id}/getArticle`,\n    method: \"get\"\n  })\n}\n// 添加文章\nexport function save (title, condec, content, filename, mimetype, checkList) {\n  return request({\n    url: \"/article/save\",\n    method: \"post\",\n    data: {\n      title,\n      condec,\n      content,\n      filename,\n      mimetype,\n      checkList\n    }\n  })\n}\n// 更新文章\nexport function update (id, title, condec, content, filename, mimetype, checkList) {\n  return request({\n    url: `/article/update/${id}`,\n    method: \"post\",\n    data: {\n      title,\n      content,\n      condec,\n      filename,\n      mimetype,\n      checkList\n    }\n  })\n}\n// 删除文章\nexport function deleteArticle (id) {\n  return request({\n    url: `/article/deleteArticle/${id}`,\n    method: \"post\",\n    data: {}\n  })\n}","import { request } from './request'\r\n\r\n// 上传文章图片（增加时）\r\nexport function uploadAddPicture (formData) {\r\n  return request({\r\n    url: `/upload/picture`,\r\n    method: \"post\",\r\n    data: formData\r\n  })\r\n}\r\n// 上传文章图片\r\nexport function uploadPicture (formData, articleId) {\r\n  return request({\r\n    url: `/upload/picture/${articleId}`,\r\n    method: \"post\",\r\n    data: formData\r\n  })\r\n}\r\n// 上传文章主图\r\nexport function uploadMainPicture (formData) {\r\n  return request({\r\n    url: `/upload/mainpicture/`,\r\n    method: \"post\",\r\n    data: formData\r\n  })\r\n}\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddArticle.vue?vue&type=style&index=0&id=fed4e83c&scoped=true&lang=css&\""],"sourceRoot":""}